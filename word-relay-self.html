<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>끝말잇기</title>
	<style>
	</style>
</head>

<body>
	<div><span id="order">1</span>번째 참가자</div>
	<div>제시어: <span id="word"></span></div>
	<input type="text">
	<button>입력</button>
	<script>
		const number = parseInt(prompt('몇명 이 참가하나요?'));

        if(number){ 

            const $button = document.querySelector('button');
            const $input = document.querySelector('input');
            const $word = document.querySelector('#word');
            const $order = document.querySelector('#order');
            let word;  // 제시어 
            let newWord; // 새로입력한단어

            const onClickButton = () => {
                if (!word || (word[word.length] -1 === newWord[0] && newWord.length === 3)) {  // 제시어가 비어 있는가 ?
                    word = newWord; // 입력한 단어가 제시어가 된다.
                    $word.textContent = word;
                    $input.value = '';
                    const order = Number($order.textContent); // 현재순서

                    if (order + 1 > number) {
                        $order.textContent = 1;
                    } else {
                        $order.textContent = order + 1;
                    }
                    $input.value ='';
                    $input.focus();
                } else {
                    //비어있지 않다. 
                    if (word[word.length - 1] === newWord[0]) { //올바른가
                        word = newWord; //입력한 단어가 제시외가 된다.
                        $word.textContent = word;
                        $input.value = '';

                        const order = Number($order.textContent); // 현재순서
                        if (order + 1 > number) {
                            $order.textContent = 1;
                        } else {
                            $order.textContent = order + 1;
                        }					
                    } else { //올바르지 않은가
                        alert('올바르지 않은 단어입니다!');					
                    }
                    $input.value ='';
                    $input.focus();

                }
            }

            const onInput = (e) => {
                newWord = e.target.value;
            }

            $button.addEventListener('click', onClickButton);
            $input.addEventListener('input', onInput);

    }

		/*document.querySelector('input').addEventListener('input',(event)=>  {
			console.log('글자입력', event.target.value);
		});

		document.querySelector('button').addEventListener('click', function(){
			console.log('버튼입력')
		});*/




	</script>

</body>

</html>